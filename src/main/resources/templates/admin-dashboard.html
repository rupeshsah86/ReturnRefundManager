<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin Return Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .action-form { display: flex; gap: 5px; align-items: center; }
        input[type="text"] { padding: 5px; border: 1px solid #ccc; border-radius: 3px; }
        button { padding: 5px 10px; border: none; border-radius: 3px; cursor: pointer; color: white; }
        .approve-btn { background-color: #4CAF50; }
        .reject-btn { background-color: #f44336; }
    </style>
</head>
<body>
    <h1>Admin Return Dashboard - Pending Requests</h1>

    <div th:if="${success}" class="success" th:text="${success}"></div>
    <div th:if="${error}" class="error" th:text="${error}"></div>

    <table th:if="${!requests.isEmpty()}">
        <thead>
            <tr>
                <th>ID</th>
                <th>Order Item ID</th>
                <th>Quantity</th>
                <th>Reason</th>
                <th>Refund Amount</th>
                <th>Date Requested</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="request : ${requests}">
                <td th:text="${request.id}">1</td>
                <td th:text="${request.orderItem.id}">101</td>
                <td th:text="${request.quantityReturned}">1</td>
                <td th:text="${request.reason}">DAMAGED</td>
                <td>$<span th:text="${#numbers.formatDecimal(request.refundAmount, 0, 'COMMA', 2, 'POINT')}">100.00</span></td>
                <td th:text="${#temporals.format(request.requestDate, 'yyyy-MM-dd HH:mm')}">2025-10-19</td>
                <td>
                    <form th:action="@{/admin/approve/{id}(id=${request.id})}" method="post" class="action-form">
                        <input type="text" name="adminNotes" placeholder="Admin Notes" required>
                        <button type="submit" class="approve-btn">Approve</button>
                    </form>
                    <form th:action="@{/admin/reject/{id}(id=${request.id})}" method="post" class="action-form" style="margin-top: 5px;">
                        <input type="text" name="adminNotes" placeholder="Reason for Rejection" required>
                        <button type="submit" class="reject-btn">Reject</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
    
    <div th:unless="${!requests.isEmpty()}">
        <p>No pending return requests found. Good job!</p>
    </div>

</body>
</html>